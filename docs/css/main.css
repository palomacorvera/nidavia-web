/* ========== TOKENS / BASE ========== */
:root{
  --brand-primary:#13293D; --brand-accent:#D4AF7A; --brand-secondary:#7AA398;
  --bg-base:#0F2232; --bg-card:#FFFFFF; --bg-page:#F7F3EE;
  --text-primary:#111418; --text-secondary:#48505A; --muted:#8B95A5; --border:#E3E7ED;
  --radius-lg:18px; --radius-xl:22px;
  --shadow:0 10px 30px rgba(0,0,0,.08); --shadow-soft:0 6px 18px rgba(0,0,0,.06);
  --container:min(1160px,92vw);
  /* Listados (home/resultado/viviendas/alquiler/obra nueva) */
  --bg-listing:#EFE8DF; --listing-gap:60px;
}

*{box-sizing:border-box}
html,body{margin:0;padding:0}
body{font-family:"Plus Jakarta Sans",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
     background:var(--bg-page);color:var(--text-primary);line-height:1.5}
img{display:block;max-width:100%}
a{color:inherit;text-decoration:none}
.container{width:var(--container);margin-inline:auto}

/* ========== BOTONES ========== */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:.55rem;
     padding:.9rem 1.2rem;border-radius:999px;border:1px solid transparent;
     font-weight:600;cursor:pointer;transition:.18s ease}
.btn:active{transform:translateY(1px)}
.btn-primary{background:var(--brand-primary);color:#fff;border-color:var(--brand-primary)}
.btn-primary:hover{filter:brightness(.93)}
.btn-outline{background:#fff;color:var(--brand-accent);border-color:var(--brand-accent)}
.btn-outline:hover{background:#F2E6D4}
.ghost-link{color:var(--brand-primary);font-weight:600}
.ghost-link:hover{text-decoration:underline;text-underline-offset:4px}

/* ========== HEADER / NAV ========== */
.header{position:sticky;top:0;z-index:50;background:var(--brand-primary);color:#fff;
        border-bottom:1px solid rgba(255,255,255,.08);box-shadow:0 4px 16px rgba(0,0,0,.12)}
.nav{min-height:96px;display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:1rem}
.brand{display:flex;align-items:center;gap:.8rem}
.brand-badge{position:relative;width:56px;height:56px;border-radius:14px;
  background:linear-gradient(135deg,var(--brand-accent),#E7CDA7);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.35),0 4px 14px rgba(0,0,0,.18);display:grid;place-items:center}
.brand-initial{font-family:"Cinzel",serif;font-weight:700;font-size:1.45rem;line-height:1;color:#0E1926}
.brand-lockup{display:flex;flex-direction:column;line-height:1.05}
.brand-line1{font-family:"Cinzel",serif;font-weight:700;font-size:clamp(1.3rem,1.2vw + 1.05rem,1.7rem);letter-spacing:.3px;color:#fff;position:relative;padding-bottom:2px}
@media (min-width:900px){.brand-line1::after{content:"";position:absolute;left:0;bottom:-4px;width:54px;height:3px;border-radius:3px;background:var(--brand-accent)}}
.brand-line2{margin-top:6px;font-weight:600;font-size:.78rem;letter-spacing:.16em;color:rgba(255,255,255,.9)}
.menu{display:flex;align-items:center;gap:1.4rem;justify-content:center}
.menu a{color:#fff;opacity:.9}
.menu a:hover{opacity:1;text-decoration:underline;text-underline-offset:4px}
/* Marca de sección activa */
.menu a[aria-current="page"]{
  opacity:1;text-decoration:underline;text-underline-offset:2px;text-decoration-thickness:2px;text-decoration-color:#fff;
}
.nav-right{display:flex;align-items:center;justify-content:flex-end;gap:.6rem}
.burger{display:none;background:transparent;color:#fff;border-color:rgba(255,255,255,.3)}
@media (max-width:980px){.menu{display:none}.nav{grid-template-columns:auto 1fr auto}.burger{display:inline-flex}}

/* Offcanvas */
.offcanvas{position:fixed;inset:0 0 0 auto;width:min(320px,82vw);background:#fff;color:var(--text-primary);
  transform:translateX(100%);transition:transform .25s ease;box-shadow:var(--shadow);
  display:flex;flex-direction:column;gap:.6rem;padding:22px;z-index:60}
.offcanvas a{padding:.5rem 0}.offcanvas .btn{width:100%}.offcanvas.open{transform:translateX(0)}

/* ========== HERO ========== */
.hero{color:#fff;isolation:isolate}
.hero-inner{padding:86px 0 56px;display:grid;gap:12px}
.kicker{text-transform:uppercase;letter-spacing:.18em;font-size:.8rem;font-weight:700;opacity:.9}
.hero h1{margin:0;line-height:1.05;font-size:clamp(2rem,3.2vw + 1rem,3.2rem)}
.hero p{margin:0;font-size:clamp(1rem,.6vw + .95rem,1.2rem);opacity:.92;max-width:62ch}

/* ========== SECCIONES / TITULARES ========== */
.section{padding:56px 0}
.section.dark{background:var(--bg-listing);color:#E9EDF3;padding-block:var(--listing-gap)}
.head{margin-bottom:18px;display:flex;align-items:center;justify-content:space-between;gap:1rem;flex-wrap:wrap}
.head h1,.head h2{margin:0;font-size:clamp(1.5rem,1.7vw + 1rem,2.2rem)}

/* ========== BUSCADOR / FILTROS (home + buscar) ========== */
.search{background:#fff;border:1px solid var(--border);border-radius:var(--radius-xl);padding:14px;box-shadow:var(--shadow-soft)}
.search-grid{display:grid;grid-template-columns:2fr 1.2fr 1.2fr 1.2fr auto;gap:10px}
@media (max-width:980px){.search-grid{grid-template-columns:1fr 1fr}.search-grid .btn{grid-column:1/-1}}
.field{background:#fff;border:1px solid var(--border);border-radius:14px;padding:.9rem .95rem;display:flex;align-items:center;gap:.6rem;color:var(--text-primary)}
.field input,.field select,.field textarea{width:100%;border:0;outline:0;font:inherit;color:var(--text-primary);background:transparent}
.field textarea{min-height:128px;resize:vertical}
.field svg{width:18px;height:18px;color:var(--text-secondary)}
.field:focus-within{box-shadow:0 0 0 2px rgba(212,175,122,.28) inset}
.field--multiline svg{align-self:flex-start;margin-top:.4rem}
.filters-bar{margin-top:8px} /* buscar */
.filters-applied{display:flex;gap:.5rem;flex-wrap:wrap}
.chip{display:inline-flex;align-items:center;gap:.4rem;padding:.38rem .65rem;border-radius:999px;font-size:.85rem;background:#fff;color:var(--brand-primary);border:1px solid var(--border);white-space:nowrap;flex-shrink:0}

/* ========== CARDS (listados + resultados) ========== */
.cards{display:grid;gap:18px;grid-template-columns:repeat(3,1fr)}
@media (max-width:1024px){.cards{grid-template-columns:repeat(2,1fr)}}
@media (max-width:640px){.cards{grid-template-columns:1fr}}
.card{display:flex;flex-direction:column;min-height:100%;
  background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius-lg);
  box-shadow:var(--shadow-soft);overflow:hidden;transition:transform .2s,box-shadow .2s,border-color .2s;color:#111418}
.card:hover{transform:translateY(-2px);box-shadow:var(--shadow)}
.card-media{position:relative;aspect-ratio:16/10;background:#dfe6ee;overflow:hidden}
.card-media img{width:100%;height:100%;object-fit:cover}
.badge{position:absolute;top:12px;left:12px;z-index:2;background:var(--brand-accent);color:#0E1926;border-radius:999px;padding:.45rem .7rem;font-weight:700;font-size:.9rem;box-shadow:0 8px 18px rgba(212,175,122,.35)}
.ribbon{position:absolute;top:12px;right:12px;z-index:2;background:rgba(0,0,0,.65);color:#fff;padding:.35rem .6rem;border-radius:999px;font-size:.85rem}
.card-body{display:flex;flex-direction:column;flex:1;padding:14px 14px 16px}
.card-title{display:flex;align-items:center;justify-content:space-between;gap:10px}
.card-title h3{margin:.2rem 0;font-size:1.1rem;flex:1 1 auto;min-width:0}
.meta{display:flex;flex-wrap:wrap;gap:.6rem .9rem;color:var(--text-secondary);font-size:.92rem;margin:.4rem 0 .8rem}
.meta svg{width:18px;height:18px;opacity:.9}
.card-actions{margin-top:auto;display:flex;align-items:center;justify-content:space-between}

/* Carrusel en cards (usado en Viviendas/Alquiler/Obra nueva/Buscar) */
.media-carousel{position:absolute;inset:0}
.media-track{height:100%;display:flex;width:100%;transition:transform .35s ease;will-change:transform}
.media-track img{flex:0 0 100%;width:100%;height:100%;object-fit:cover;user-select:none}
.media-nav{position:absolute;top:50%;transform:translateY(-50%);width:40px;height:40px;display:grid;place-items:center;border-radius:999px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.9);color:#fff;cursor:pointer;z-index:3}
.media-nav:hover{background:rgba(0,0,0,.5)} .media-prev{left:8px} .media-next{right:8px}
.media-nav svg{width:20px;height:20px}
/* garantizar z-index de badge/ribbon sobre carrusel */
.card-media .badge,.card-media .ribbon{z-index:4}

/* ========== FORMULARIOS (contacto + auth) ========== */
.fields{display:grid;grid-template-columns:1fr 1fr;gap:12px}
@media (max-width:640px){.fields{grid-template-columns:1fr}}
.form-row{display:grid;grid-template-columns:1fr;gap:12px;margin-top:12px}
.help{color:#ba1a1a;font-size:.92rem;display:none;margin-top:6px}
.success{display:none;margin-top:10px;padding:12px;border:1px solid #c9ead6;background:#effaf4;color:#0f5132;border-radius:12px}
/* Consentimientos */
.consent{display:flex;justify-content:flex-start;align-items:center;gap:.6rem;color:var(--text-secondary)}
.consent input{margin:0} /* centro vertical con el texto */

/* ========== AUTH (login / signup) ========== */
.auth-wrap{display:grid;place-items:center}
.auth-card{width:min(520px,92vw);background:#fff;border:1px solid var(--border);border-radius:var(--radius-xl);box-shadow:var(--shadow-soft);padding:24px}
.auth-head{display:grid;gap:.4rem;margin-bottom:10px}
.auth-head h1{margin:0;font-size:clamp(1.4rem,1.2vw + 1.1rem,1.9rem)}
.auth-sub{color:var(--text-secondary)}
.field.is-invalid{border-color:#d92d20;box-shadow:0 0 0 2px rgba(217,45,32,.12) inset}
/* ===== Botón "Iniciar sesión" más fino ===== */
.header .btn-outline{
  padding:0.75rem 1.4rem;   /* ↓ altura */
  border-width:1px;       /* menos “gordo” visualmente */
}

/* Evita el parpadeo del estado de sesión */
.nav-right [id^="btn-"],
.offcanvas [id^="btn-"],
.nav-right #link-account,
.offcanvas #link-account {
  visibility: hidden;
}
body.auth-ready .nav-right [id^="btn-"],
body.auth-ready .offcanvas [id^="btn-"],
body.auth-ready .nav-right #link-account,
body.auth-ready .offcanvas #link-account {
  visibility: visible;
}

/* === Evitar parpadeo de header/footer === */
.header.loading,
.header.loading * {
  visibility: hidden;
}

body.partials-ready .header.loading,
body.partials-ready .header.loading * {
  visibility: visible;
}

/* ========== FOOTER ========== */
footer{margin-top:32px;background:var(--brand-primary);color:#fff;border-top:1px solid rgba(255,255,255,.06)}
.foot{padding:38px 0;display:grid;grid-template-columns:1.2fr .8fr .8fr;gap:22px}
.foot h5{margin:.2rem 0 1rem;letter-spacing:.04em;text-transform:uppercase;font-size:.85rem;opacity:.9}
.foot a{color:#fff;opacity:.9;display:block;padding:.22rem 0}
.foot a:hover{opacity:1;text-decoration:underline;text-underline-offset:4px}
.newsletter{display:flex;gap:8px;align-items:center;background:#fff;color:var(--text-primary);border-radius:14px;padding:6px;border:1px solid var(--border)}
.newsletter input{border:0;outline:0;padding:.7rem .8rem;background:transparent;flex:1;font:inherit}
.copy{padding:14px 0 28px;color:rgba(255,255,255,.85);font-size:.92rem;display:flex;justify-content:space-between;gap:1rem;flex-wrap:wrap}
@media (max-width:900px){.foot{grid-template-columns:1fr 1fr}}
@media (max-width:600px){.foot{grid-template-columns:1fr}}
@media (min-width:900px){.foot > :nth-child(2){margin-left: clamp(24px, 5vw, 96px)}}
